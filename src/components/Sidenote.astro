---
export interface Props {
	id?: string
	unnumbered?: boolean
}

const { id, unnumbered = false } = Astro.props

// Generate a unique ID if not provided
const sidenoteId = id || `sidenote-${Math.random().toString(36).substring(2, 11)}`
---

<span class:list={[{"sidenote-unnumbered-wrapper": unnumbered, "sidenote-wrapper": !unnumbered}]} data-sidenote-id={sidenoteId}>
	{!unnumbered && (
		<>
			<input type="checkbox" class="margin-toggle" id={sidenoteId} />
			<label class="sidenote-number" for={sidenoteId}></label>
		</>
	)}
	<span class:list={[{"sidenote-unnumbered": unnumbered, "sidenote": !unnumbered}]}>
		{!unnumbered && <span class="sidenote-number-copy text-primary dark:text-primary-dark"></span>}
		<slot />
	</span>
</span>

<style>
	.sidenote-wrapper {
		display: contents;
	}
</style>